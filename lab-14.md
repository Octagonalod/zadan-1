[Перелік усіх робіт](README.md)

## Доступ до сторінок та аналіз даних за допомогою регулярних виразів

## Мета роботи

Створити PHP-програму, яка б завантажувала веб-сторінку з сайту gismeteo.ua, аналізувала б її та виводила інформацію про тривалість світлого часу доби, а також денну температуру на свою веб-сторінку. Додати цю програму на свій сайт та поставити на неї посилання з головної сторінки сайту. Оцінка за виконану роботу може бути підвищена за умови надання короткого та красивого вихідного тексту програми

## Обладнання

Персональний комп'ютер. Текстовий редактор Sublime Text 3 або Notepad++. Пакет програм XAMPP. Web-браузер Chrome, Firefox, Opera, MS Edge

## Хід роботи

1. Сайт gismeteo.ua (малюнок 1) надає користувачам прогнози погоди

![img-1](/lab-14-files/img-1.png)
<br>Малюнок 1- Сайт gismeteo.ua</br>

Ваша програма має завантажити прогноз погоди для міста Харкова (посилання http://www.gismeteo.ua/city/hourly/5053/) та вивести на свою веб-сторінку наступну інформацію: назва міста (взяти з веб-сторінки, отриманої від gismeteo .ua), поточну дату (теж взяти з сайту), час сходу та заходу сонця, тривалість світлого часу доби, а також прогноз температури на 0, 3, 6, 9, 12, 15, 18 та 21 год (див. мал. 2).

![img-2](/lab-14-files/img-2.png)
<br>Малюнок 2 - Веб-сторінка, яка завантажує та аналізує інформацію з gismeteo.ua</br>

  Зверніть увагу на те, щоб ваша програма виводила слова “година”, “години”, “годин” у відповідному відмінку залежно від конкретної тривалості дня. Наприклад, "1 година" або "3 години" або "8 годин".
<br>Якщо, як у цьому прикладі, тривалість дня становить цілу кількість годин, то програма має виводити напис: “рівно X годин”, де X - кількість годин. Якщо не ціле, то виводити напис: "X годин Y хв", де Y - кількість хвилин.</br>

2. Замініть у своїй програмі посилання "http://www.gismeteo.ua/city/hourly/5053/" на посилання "http://www.gismeteo.ua/city/hourly/4944/" (прогноз погоди для міста Київ). Перевірте, чи правильно працює ваша програма в цьому випадку (див. малюнок 3).

![img-3](/lab-14-files/img-3.png)
<br>Малюнок 3 - Ця ж сторінка, але обробна прогноз погоди для м. Київ</br>

## Методичні вказівки

Для запиту на сайт використовуйте функції PHP curl_setopt(), curl_exec() та curl_close(). Наприклад, ось так:

```php
$curl=curl_init();
curl_setopt($curl, CURLOPT_URL,
'http://www.gismeteo.ua/city/hourly/5053/');
curl_setopt($curl, CURLOPT_RETURNTRANSFER,true);
$out = curl_exec($curl);
```

Для конвертації отриманого вмісту веб-сторінки з кодування UTF-8 у кодування Windows-1251 використовуйте mb_convert_encoding()
<br>На екрані виведіть вихідний код сторінки сайту http://www.gismeteo.ua/city/hourly/5053/ та знайдіть необхідні ключові слова (малюнок 4)</br>

![img-4](/lab-14-files/img-4.png)
<br>Малюнок 4 - Приклад вихідного тексту веб-сторінки, яка отримується від сайту gismeteo.ua</br>

Наприклад, час сходу сонця знаходиться в тексті сторінки між фрагментами тексту ```"Схід"/strong та "<li>".```
<br>Використовуючи регулярні вирази (або написавши свою функцію для пошуку фрагмента тексту), витягніть із сторінки всю необхідну вам інформацію.</br>

Наприклад, текст для вилучення зі сторінки інформації про схід сонця може виглядати приблизно так::

```php
$c = preg_match("/Cхід\<\/strong\> .*\<li\>/sU", $out,$a);
$s=$a[0];
$l=strlen($s);
$u=substr($s,16,$l-20);
echo $u;
```

Тут:
<br>$out - рядок, в якому ми міститься текст веб-сторінки, отриманої з gismeteo.ua.
Схід\<\/strong\> .*\<li\>/sU" - регулярне вираження для пошуку першого фрагмента, що починається з “Схід”/strong і закінчується ```“<li>”``` (символи “\” використовуються тут для екранування службових символів типу “/”, “<”, “>” та ін.).</br>
<br>$s - знайдений фрагмент;</br>
<br>$l - довжина рядка $s;</br>
<br>$u - знайдений фрагмент без "Схід"/strong (16 літер) спочатку і ```"<li>"``` (4 літери) в кінці (всього - $l-20 букв).</br>

За подобою витягніть із веб-сторінки всю решту необхідної інформації (час заходу, назва міста, дату, прогнози температури).
<br>Для виведення на екран граудсів використовуйте спецсимвол HTML ```“&deg;”```.</br>
